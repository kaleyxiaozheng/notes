**[Models](https://www.tutorialspoint.com/yii/yii_models.htm)**

> Models are objects representing business logic and rules. To create a model, you should extend the yii\base\Model class or its subclasses.

> Attributes represent the business data.

> To specify what attributes a model possesses, you should override the `yii\base\Model::attributes()` method

```javascript
//Define the ContactForm model, set attributes, and display the model on the screen.

public function actionShowContactModel() { 
   $mContactForm = new \app\models\ContactForm(); 
   $mContactForm->name = "contactForm"; 
   $mContactForm->email = "user@gmail.com"; 
   $mContactForm->subject = "subject"; 
   $mContactForm->body = "body"; 
   var_dump($mContactForm); 
}
```

> **Attribute Labels**
>> You often need to display labels associated with attributes. By default, attribute labels are automatically generated by the `yii\base\Model::generateAttributeLabel()` method. To manually declare attribute labels, you may override the `yii\base\Model::attributeLabels()` method.

```javascript
// modify the attributeLabels function in the ContactForm model in the following way.

public function attributeLabels() {
   return [
      'name' => 'name overridden',
      'email' => 'email overridden',
      'subject' => 'subject overridden',
      'body' => 'body overridden',
      'verifyCode' => 'verifyCode overridden',
   ];
}
```

> **Scenarios**
>> You can use a model in different scenarios. For example, when a guest wants to send a contact form, we need all the model attributes. When a user wants to do the same thing, he is already logged in, so we do not need his name, as we can easily take it from the DB.

>> To declare scenarios, we should override the `scenarios()` function. It returns an array whose keys are the scenario names and values are active attributes. Active attributes are the ones to validate. They can also be massively assigned.

```javascript
// Modify the ContactForm model in the following way.
   const SCENARIO_EMAIL_FROM_GUEST = 'EMAIL_FROM_GUEST';
      const SCENARIO_EMAIL_FROM_USER = 'EMAIL_FROM_USER';
      public function scenarios() {
         return [
            self::SCENARIO_EMAIL_FROM_GUEST => ['name', 'email', 'subject', 
               'body', 'verifyCode'],
            self::SCENARIO_EMAIL_FROM_USER => ['email' ,'subject', 'body', 
               'verifyCode'],
         ];
      }

// modify the actionContact function of the SiteController
public function actionContact() {
   $model = new ContactForm();
   $model->scenario = ContactForm::SCENARIO_EMAIL_FROM_GUEST;
   if ($model->load(Yii::$app->request->post()) && $model->
      contact(Yii::$app->params ['adminEmail'])) {
         Yii::$app->session->setFlash('contactFormSubmitted');  
         return $this->refresh();
   }
   return $this->render('contact', [
      'model' => $model,
   ]);
}
```

> **Massive Assignment**
>> Massive assignment is a convenient way of creating a model from multiple input attributes via a single line of code.

```javascript
$mContactForm = new \app\models\ContactForm; 
$mContactForm->attributes = \Yii::$app->request->post('ContactForm');

// equal to 

$mContactForm = new \app\models\ContactForm; 
$postData = \Yii::$app->request->post('ContactForm', []); 
$mContactForm->name = isset($postData['name']) ? $postData['name'] : null; 
$mContactForm->email = isset($postData['email']) ? $postData['email'] : null; 
$mContactForm->subject = isset($postData['subject']) ? $postData['subject'] : null; 
$mContactForm->body = isset($postData['body']) ? $postData['body'] : null;
```

> The former is much cleaner. 

> **Notice** that massive assignment only applies to the _safe attributes_. They are just the current scenario attributes listed in the `scenario()` function.

> **Data Export**
>> * To convert the model into an array
```javascript
// inside the SiteController
public function actionShowContactModel() {
   $mContactForm = new \app\models\ContactForm();
   $mContactForm->name = "contactForm";
   $mContactForm->email = "user@gmail.com";
   $mContactForm->subject = "subject";
   $mContactForm->body = "body";
   var_dump($mContactForm->attributes);
} 
```

>> * To convert the model into the **JSON**
```javascript
// inside the SiteController
public function actionShowContactModel() {
   $mContactForm = new \app\models\ContactForm();
   $mContactForm->name = "contactForm";
   $mContactForm->email = "user@gmail.com";
   $mContactForm->subject = "subject";
   $mContactForm->body = "body";
   return \yii\helpers\Json::encode($mContactForm);
}
```

> **Important Points** Models are usually much faster than controllers in a well-designed application. Models should âˆ’
>> * Contain business logic.
>> * Contain validation rules.
>> * Contain attributes.
>> * Not embed HTML.
>> * Not directly access requests.
>> * Not have too many scenarios.